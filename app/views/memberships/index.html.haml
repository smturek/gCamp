.container

  .page-header
    %h1
      = "#{@project.name}: Manage Members"

  .row
    %ol.breadcrumb
      %li
        = link_to "Projects", projects_path
      %li
        = link_to "#{@project.name}", project_path(@project)
      %li.active
        Memberships

  = render "shared/errors", source: @project

  .row
    .well.col-md-5
      = form_for [@project, @membership], :html => {:class => 'form-inline'} do |f|

        = f.collection_select :user_id, User.all, :id, :full_name,
            {include_blank: "Please select a user... "}, {class: "form-control"}

        = f.collection_select :role_id, Role.all, :id, :role, {}, {class: "form-control"}

        = f.submit "Add New Member", :class => "btn btn-primary"

  .row
    %table.table-condensed
      - @memberships.each do |membership|
        = form_for [@project, membership], :html => {:class => 'form-inline'} do |f|
          %tr
            %td= link_to membership.user.full_name, user_path(membership.user_id)
            %td= f.collection_select :role_id, Role.all, :id, :role, {}, {class: "form-control"}
            %td= f.submit "Update", :class => "btn btn-primary"
            %td= link_to "Delete", project_membership_path(@project, membership), method: :delete
            %span.glyphicon.glyphicon-remove
